import{s as ge,v as Y,h as Z,d as k,r as he,n as T}from"../chunks/scheduler.cbec24b0.js";import{S as be,i as ke,d as B,v as ve,e as H,a as E,t as O,b as ie,f as R,g as _,r as oe,j as v,s as V,k as y,A as U,c as D,l as L,m as g,z as C,D as $,B as z,E as ye,u as se,w as le,x as re,y as ae}from"../chunks/index.10018323.js";import{a as G,e as ee,i as te,h as ne}from"../chunks/firebase.0fc7c591.js";import{W as ce}from"../chunks/WarningMessage.0e36ba4b.js";import{E as ue}from"../chunks/ErrorMessage.6934c9d7.js";import{b as A,g as W}from"../chunks/navigation.4767422d.js";import{f as M}from"../chunks/firebaseStores.8d8ba113.js";const w="src/routes/auth/sign-in-with-link/+page.svelte";function fe(c){let e,n="Enter your email",l,i,s,a,o,u="Email",r,t,m,b,P,S,q="Sign in",j,f,I,d=c[0].length>0&&x(c);const K={c:function(){e=v("h1"),e.textContent=n,l=V(),i=v("form"),s=v("div"),a=v("label"),o=v("span"),o.textContent=u,r=V(),t=v("input"),m=V(),d&&d.c(),b=V(),P=v("div"),S=v("button"),S.textContent=q,this.h()},l:function(p){e=y(p,"H1",{"data-svelte-h":!0}),U(e)!=="svelte-19xf491"&&(e.textContent=n),l=D(p),i=y(p,"FORM",{"aria-label":!0});var h=L(i);s=y(h,"DIV",{class:!0});var F=L(s);a=y(F,"LABEL",{for:!0,class:!0});var Q=L(a);o=y(Q,"SPAN",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-fqi07v"&&(o.textContent=u),Q.forEach(_),r=D(F),t=y(F,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),F.forEach(_),m=D(h),d&&d.l(h),b=D(h),P=y(h,"DIV",{class:!0});var X=L(P);S=y(X,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),U(S)!=="svelte-188ibgy"&&(S.textContent=q),X.forEach(_),h.forEach(_),this.h()},h:function(){k(e,w,82,1,1992),g(o,"class","label-text"),k(o,w,86,4,2156),g(a,"for","email-input"),g(a,"class","label"),k(a,w,85,3,2112),t.required=!0,g(t,"id","email-input"),g(t,"type","email"),g(t,"placeholder","email"),g(t,"class","input input-bordered"),k(t,w,88,3,2209),g(s,"class","form-control"),k(s,w,84,2,2082),g(S,"class","btn btn-primary w-36"),g(S,"type","button"),k(S,w,101,3,2487),g(P,"class","form-control mt-6"),k(P,w,100,2,2452),g(i,"aria-label","form"),k(i,w,83,1,2019)},m:function(p,h){E(p,e,h),E(p,l,h),E(p,i,h),C(i,s),C(s,a),C(a,o),C(s,r),C(s,t),$(t,c[1]),C(i,m),d&&d.m(i,null),C(i,b),C(i,P),C(P,S),j=!0,f||(I=[z(t,"input",c[8]),z(S,"click",c[9],!1,!1,!1,!1),z(i,"submit",ye(we),!1,!0,!1,!1)],f=!0)},p:function(p,h){h&2&&t.value!==p[1]&&$(t,p[1]),p[0].length>0?d?(d.p(p,h),h&1&&R(d,1)):(d=x(p),d.c(),R(d,1),d.m(i,b)):d&&(oe(),O(d,1,1,()=>{d=null}),ie())},i:function(p){j||(R(d),j=!0)},o:function(p){O(d),j=!1},d:function(p){p&&(_(e),_(l),_(i)),d&&d.d(),f=!1,he(I)}};return B("SvelteRegisterBlock",{block:K,id:fe.name,type:"if",source:"(68:34) ",ctx:c}),K}function me(c){let e,n="Signing in...",l,i,s;const a={c:function(){e=v("h1"),e.textContent=n,l=V(),i=v("div"),s=v("span"),this.h()},l:function(u){e=y(u,"H1",{"data-svelte-h":!0}),U(e)!=="svelte-yyzbry"&&(e.textContent=n),l=D(u),i=y(u,"DIV",{class:!0});var r=L(i);s=y(r,"SPAN",{class:!0}),L(s).forEach(_),r.forEach(_),this.h()},h:function(){k(e,w,77,1,1829),g(s,"class","loading loading-spinner loading-lg"),k(s,w,79,2,1896),g(i,"class","w-full flex justify-center"),k(i,w,78,1,1853)},m:function(u,r){E(u,e,r),E(u,l,r),E(u,i,r),C(i,s)},p:T,i:T,o:T,d:function(u){u&&(_(e),_(l),_(i))}};return B("SvelteRegisterBlock",{block:a,id:me.name,type:"if",source:"(63:34) ",ctx:c}),a}function de(c){let e,n,l,i;e=new ce({props:{message:"Link inactive. Go to sign in page."},$$inline:!0});function s(r,t){return r[5]?pe:_e}let a=s(c),o=a(c);const u={c:function(){se(e.$$.fragment),n=V(),o.c(),l=H()},l:function(t){le(e.$$.fragment,t),n=D(t),o.l(t),l=H()},m:function(t,m){re(e,t,m),E(t,n,m),o.m(t,m),E(t,l,m),i=!0},p:function(t,m){a===(a=s(t))&&o?o.p(t,m):(o.d(1),o=a(t),o&&(o.c(),o.m(l.parentNode,l)))},i:function(t){i||(R(e.$$.fragment,t),i=!0)},o:function(t){O(e.$$.fragment,t),i=!1},d:function(t){t&&(_(n),_(l)),ae(e,t),o.d(t)}};return B("SvelteRegisterBlock",{block:u,id:de.name,type:"if",source:"(47:0) {#if wrongLink}",ctx:c}),u}function x(c){let e,n;e=new ue({props:{message:c[0]},$$inline:!0});const l={c:function(){se(e.$$.fragment)},l:function(s){le(e.$$.fragment,s)},m:function(s,a){re(e,s,a),n=!0},p:function(s,a){const o={};a&1&&(o.message=s[0]),e.$set(o)},i:function(s){n||(R(e.$$.fragment,s),n=!0)},o:function(s){O(e.$$.fragment,s),n=!1},d:function(s){ae(e,s)}};return B("SvelteRegisterBlock",{block:l,id:x.name,type:"if",source:"(84:2) {#if $signInError.length > 0}",ctx:c}),l}function _e(c){let e,n="Sign in page",l,i;const s={c:function(){e=v("button"),e.textContent=n,this.h()},l:function(o){e=y(o,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1o84kqn"&&(e.textContent=n),this.h()},h:function(){g(e,"class","btn btn-active btn-neutral"),k(e,w,65,2,1614)},m:function(o,u){E(o,e,u),l||(i=z(e,"click",c[7],!1,!1,!1,!1),l=!0)},p:T,d:function(o){o&&_(e),l=!1,i()}};return B("SvelteRegisterBlock",{block:s,id:_e.name,type:"else",source:"(51:1) {:else}",ctx:c}),s}function pe(c){let e;const n={c:function(){e=v("span"),this.h()},l:function(i){e=y(i,"SPAN",{class:!0}),L(e).forEach(_),this.h()},h:function(){g(e,"class","loading loading-spinner"),k(e,w,63,2,1562)},m:function(i,s){E(i,e,s)},p:T,d:function(i){i&&_(e)}};return B("SvelteRegisterBlock",{block:n,id:pe.name,type:"if",source:"(49:1) {#if inProgress}",ctx:c}),n}function J(c){let e,n,l,i;const s=[de,me,fe],a=[];function o(r,t){return r[4]?0:r[2]||!r[3]?1:!r[2]&&r[3]?2:-1}~(e=o(c))&&(n=a[e]=s[e](c));const u={c:function(){n&&n.c(),l=H()},l:function(t){n&&n.l(t),l=H()},m:function(t,m){~e&&a[e].m(t,m),E(t,l,m),i=!0},p:function(t,[m]){let b=e;e=o(t),e===b?~e&&a[e].p(t,m):(n&&(oe(),O(a[b],1,1,()=>{a[b]=null}),ie()),~e?(n=a[e],n?n.p(t,m):(n=a[e]=s[e](t),n.c()),R(n,1),n.m(l.parentNode,l)):n=null)},i:function(t){i||(R(n),i=!0)},o:function(t){O(n),i=!1},d:function(t){t&&_(l),~e&&a[e].d(t)}};return B("SvelteRegisterBlock",{block:u,id:J.name,type:"component",source:"",ctx:c}),u}const we=()=>{};function Se(c,e,n){let l,i;Y(A,"signInError"),Z(c,A,f=>n(0,l=f)),Y(M,"firstSignIn"),Z(c,M,f=>n(10,i=f));let{$$slots:s={},$$scope:a}=e;ve("Page",s,[]);let o,u,r=!1,t=!1,m=!1;async function b(){var f;try{if(!r)if(te(G,window.location.href))n(3,r=!0),n(2,u=window.localStorage.getItem("emailForSignIn")),window.localStorage.removeItem("emailForSignIn");else{n(4,t=!0);return}if(u){const I=await ne(G,u);M.set((f=ee(I))==null?void 0:f.isNewUser),A.set(""),i?W("/auth/set-password"):W("/")}}catch(I){typeof I=="object"&&I&&"message"in I&&typeof I.message=="string"&&A.set(I.message.replace("Firebase: ",""))}}b();const P=[];Object.keys(e).forEach(f=>{!~P.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Page> was created with unknown prop '${f}'`)});const S=()=>{n(5,m=!0),W("/auth"),A.set("")};function q(){o=this.value,n(1,o)}const j=()=>{n(2,u=o),b()};return c.$capture_state=()=>({auth:G,getAdditionalUserInfo:ee,isSignInWithEmailLink:te,signInWithEmailLink:ne,WarningMessage:ce,ErrorMessage:ue,signInError:A,firstSignIn:M,goto:W,inputValue:o,email:u,linkEvaluated:r,wrongLink:t,inProgress:m,confirmSignIn:b,$signInError:l,$firstSignIn:i}),c.$inject_state=f=>{"inputValue"in f&&n(1,o=f.inputValue),"email"in f&&n(2,u=f.email),"linkEvaluated"in f&&n(3,r=f.linkEvaluated),"wrongLink"in f&&n(4,t=f.wrongLink),"inProgress"in f&&n(5,m=f.inProgress)},e&&"$$inject"in e&&c.$inject_state(e.$$inject),c.$$.update=()=>{c.$$.dirty&1&&l&&n(4,t=!0)},[l,o,u,r,t,m,b,S,q,j]}class Re extends be{constructor(e){super(e),ke(this,e,Se,J,ge,{}),B("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:J.name})}}export{Re as component};
