import{s as U,v as E,h as W,d as _,n as v}from"../chunks/scheduler.cbec24b0.js";import{S as x,i as T,d as g,v as V,e as O,a as p,r as te,t as j,b as ne,f as R,g as d,u as z,s as F,j as b,w as H,c as M,k as w,A as ie,m as P,x as J,B as oe,y as K,l as I,z as S,o as B,p as G,q as re}from"../chunks/index.10018323.js";import{f as $,u as y}from"../chunks/firebaseStores.8d8ba113.js";import{G as se,d as ae,g as ce,a as L,e as le}from"../chunks/firebase.0fc7c591.js";import{b as h,g as N}from"../chunks/navigation.4767422d.js";import{E as Q}from"../chunks/ErrorMessage.6934c9d7.js";async function q(){const i=new se;await ae(L,i)}async function D(){var i;try{const e=await ce(L);e&&$.set((i=le(e))==null?void 0:i.isNewUser),h.set("")}catch(e){typeof e=="object"&&e&&"message"in e&&typeof e.message=="string"&&h.set(e.message.replace("Firebase: ",""))}}const k="src/components/auth/SignInWithProvider.svelte";function X(i){let e,n,o,r="Sign in page",s,a,u;e=new Q({props:{message:`${i[0]} sign in failed: ${i[2]}. <br>Go back to sign in page.`},$$inline:!0});const f={c:function(){z(e.$$.fragment),n=F(),o=b("button"),o.textContent=r,this.h()},l:function(t){H(e.$$.fragment,t),n=M(t),o=w(t,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(o)!=="svelte-syoqrb"&&(o.textContent=r),this.h()},h:function(){P(o,"class","btn btn-active btn-neutral"),_(o,k,20,1,703)},m:function(t,l){J(e,t,l),p(t,n,l),p(t,o,l),s=!0,a||(u=oe(o,"click",i[3],!1,!1,!1,!1),a=!0)},p:function(t,l){const m={};l&5&&(m.message=`${t[0]} sign in failed: ${t[2]}. <br>Go back to sign in page.`),e.$set(m)},i:function(t){s||(R(e.$$.fragment,t),s=!0)},o:function(t){j(e.$$.fragment,t),s=!1},d:function(t){t&&(d(n),d(o)),K(e,t),a=!1,u()}};return g("SvelteRegisterBlock",{block:f,id:X.name,type:"if",source:"(17:30) ",ctx:i}),f}function Y(i){let e,n;const o={c:function(){e=b("div"),n=b("span"),this.h()},l:function(s){e=w(s,"DIV",{class:!0});var a=I(e);n=w(a,"SPAN",{class:!0}),I(n).forEach(d),a.forEach(d),this.h()},h:function(){P(n,"class","loading loading-spinner loading-lg"),_(n,k,16,2,503),P(e,"class","w-full flex justify-center"),_(e,k,15,1,460)},m:function(s,a){p(s,e,a),S(e,n)},p:v,i:v,o:v,d:function(s){s&&d(e)}};return g("SvelteRegisterBlock",{block:o,id:Y.name,type:"if",source:"(13:39) ",ctx:i}),o}function Z(i){let e,n,o,r,s,a,u;const f={c:function(){e=b("h1"),n=B("Waiting for "),o=B(i[0]),r=B("..."),s=F(),a=b("div"),u=b("span"),this.h()},l:function(t){e=w(t,"H1",{});var l=I(e);n=G(l,"Waiting for "),o=G(l,i[0]),r=G(l,"..."),l.forEach(d),s=M(t),a=w(t,"DIV",{class:!0});var m=I(a);u=w(m,"SPAN",{class:!0}),I(u).forEach(d),m.forEach(d),this.h()},h:function(){_(e,k,10,1,276),P(u,"class","loading loading-spinner loading-lg"),_(u,k,12,2,359),P(a,"class","w-full flex justify-center"),_(a,k,11,1,316)},m:function(t,l){p(t,e,l),S(e,n),S(e,o),S(e,r),p(t,s,l),p(t,a,l),S(a,u)},p:function(t,l){l&1&&re(o,t[0])},i:v,o:v,d:function(t){t&&(d(e),d(s),d(a))}};return g("SvelteRegisterBlock",{block:f,id:Z.name,type:"if",source:"(8:0) {#if $user === null}",ctx:i}),f}function C(i){let e,n,o,r;const s=[Z,Y,X],a=[];function u(c,t){return c[1]===null?0:c[1]||c[1]===void 0?1:c[2]!==""?2:-1}~(e=u(i))&&(n=a[e]=s[e](i));const f={c:function(){n&&n.c(),o=O()},l:function(t){n&&n.l(t),o=O()},m:function(t,l){~e&&a[e].m(t,l),p(t,o,l),r=!0},p:function(t,[l]){let m=e;e=u(t),e===m?~e&&a[e].p(t,l):(n&&(te(),j(a[m],1,1,()=>{a[m]=null}),ne()),~e?(n=a[e],n?n.p(t,l):(n=a[e]=s[e](t),n.c()),R(n,1),n.m(o.parentNode,o)):n=null)},i:function(t){r||(R(n),r=!0)},o:function(t){j(n),r=!1},d:function(t){t&&d(o),~e&&a[e].d(t)}};return g("SvelteRegisterBlock",{block:f,id:C.name,type:"component",source:"",ctx:i}),f}function ue(i,e,n){let o,r;E(y,"user"),W(i,y,t=>n(1,o=t)),E(h,"signInError"),W(i,h,t=>n(2,r=t));let{$$slots:s={},$$scope:a}=e;V("SignInWithProvider",s,[]);let{providerName:u}=e;i.$$.on_mount.push(function(){u===void 0&&!("providerName"in e||i.$$.bound[i.$$.props.providerName])&&console.warn("<SignInWithProvider> was created without expected prop 'providerName'")});const f=["providerName"];Object.keys(e).forEach(t=>{!~f.indexOf(t)&&t.slice(0,2)!=="$$"&&t!=="slot"&&console.warn(`<SignInWithProvider> was created with unknown prop '${t}'`)});const c=()=>{N("/auth"),h.set("")};return i.$$set=t=>{"providerName"in t&&n(0,u=t.providerName)},i.$capture_state=()=>({user:y,goto:N,signInError:h,ErrorMessage:Q,providerName:u,$user:o,$signInError:r}),i.$inject_state=t=>{"providerName"in t&&n(0,u=t.providerName)},e&&"$$inject"in e&&i.$inject_state(e.$$inject),[u,o,r,c]}class ee extends x{constructor(e){super(e),T(this,e,ue,C,U,{providerName:0}),g("SvelteRegisterComponent",{component:this,tagName:"SignInWithProvider",options:e,id:C.name})}get providerName(){throw new Error("<SignInWithProvider>: Props cannot be read directly from the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}set providerName(e){throw new Error("<SignInWithProvider>: Props cannot be set directly on the component instance unless compiling with 'accessors: true' or '<svelte:options accessors/>'")}}function A(i){let e,n;e=new ee({props:{providerName:"Google"},$$inline:!0});const o={c:function(){z(e.$$.fragment)},l:function(s){H(e.$$.fragment,s)},m:function(s,a){J(e,s,a),n=!0},p:v,i:function(s){n||(R(e.$$.fragment,s),n=!0)},o:function(s){j(e.$$.fragment,s),n=!1},d:function(s){K(e,s)}};return g("SvelteRegisterBlock",{block:o,id:A.name,type:"component",source:"",ctx:i}),o}function fe(i,e,n){let o,r;E($,"firstSignIn"),W(i,$,f=>n(0,o=f)),E(y,"user"),W(i,y,f=>n(1,r=f));let{$$slots:s={},$$scope:a}=e;V("Page",s,[]);const u=[];return Object.keys(e).forEach(f=>{!~u.indexOf(f)&&f.slice(0,2)!=="$$"&&f!=="slot"&&console.warn(`<Page> was created with unknown prop '${f}'`)}),i.$capture_state=()=>({firstSignIn:$,user:y,checkGoogleSignInStatus:D,signInWithGoogle:q,goto:N,SignInWithProvider:ee,$firstSignIn:o,$user:r}),i.$$.update=()=>{i.$$.dirty&2&&(r===null?q():r&&D()),i.$$.dirty&1&&(o===!1&&o!==void 0?N("/"):o&&N("/auth/set-password"))},[o,r]}class ve extends x{constructor(e){super(e),T(this,e,fe,A,U,{}),g("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:A.name})}}export{ve as component};
