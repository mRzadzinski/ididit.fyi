import{s as je,v as Pe,h as Ee,d as h,r as xe,n as Se}from"../chunks/scheduler.cbec24b0.js";import{S as Le,i as Oe,d as q,v as Ve,e as Ne,a as j,f as L,t as W,b as pe,g as w,j as _,k as b,l as I,m as a,z as f,r as me,s as D,o as Ae,A as H,c as R,p as Ie,D as ee,B as J,E as qe,K as ze,u as Me,w as Fe,x as Ge,y as He}from"../chunks/index.10018323.js";import{a as Be,u as Ue}from"../chunks/firebase.0fc7c591.js";import{u as G,g as te}from"../chunks/navigation.4767422d.js";import{W as De}from"../chunks/WarningMessage.0e36ba4b.js";import{u as re}from"../chunks/firebaseStores.8d8ba113.js";const v="src/routes/auth/set-password/+page@.svelte";function ie(o){let e,l,t,n,s,r;const i=[Te,Re],p=[];function m(c,d){return c[4]?0:1}n=m(o),s=p[n]=i[n](o);const N={c:function(){e=_("main"),l=_("div"),t=_("div"),s.c(),this.h()},l:function(d){e=b(d,"MAIN",{class:!0});var g=I(e);l=b(g,"DIV",{class:!0});var u=I(l);t=b(u,"DIV",{class:!0});var P=I(t);s.l(P),P.forEach(w),u.forEach(w),g.forEach(w),this.h()},h:function(){a(t,"class","card-body"),h(t,v,48,3,1463),a(l,"class","prose prose-sm card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100"),h(l,v,47,2,1373),a(e,"class","flex h-screen justify-center items-center flex-col"),h(e,v,46,1,1305)},m:function(d,g){j(d,e,g),f(e,l),f(l,t),p[n].m(t,null),r=!0},p:function(d,g){let u=n;n=m(d),n===u?p[n].p(d,g):(me(),W(p[u],1,1,()=>{p[u]=null}),pe(),s=p[n],s?s.p(d,g):(s=p[n]=i[n](d),s.c()),L(s,1),s.m(t,null))},i:function(d){r||(L(s),r=!0)},o:function(d){W(s),r=!1},d:function(d){d&&w(e),p[n].d()}};return q("SvelteRegisterBlock",{block:N,id:ie.name,type:"if",source:"(38:0) {#if $user && $user !== undefined}",ctx:o}),N}function Re(o){let e,l,t="Set password",n,s,r,i="Email",p,m,N,c,d,g,u,P="Password",K,E,y,U,O,V,he="Confirm password",ne,B,se,Q,z,T,X,le,M,x,_e="Do it later in settings",Y,ae,be,C=o[5].length>0&&ue(o),A=o[3]&&ce(o);const ve={c:function(){e=_("form"),l=_("h1"),l.textContent=t,n=D(),s=_("label"),r=_("span"),r.textContent=i,p=D(),m=_("input"),c=D(),d=_("div"),g=_("label"),u=_("span"),u.textContent=P,K=D(),E=_("input"),y=D(),U=_("div"),O=_("label"),V=_("span"),V.textContent=he,ne=D(),B=_("input"),se=D(),C&&C.c(),Q=D(),z=_("div"),T=_("button"),A&&A.c(),X=Ae(`
								Save`),le=D(),M=_("div"),x=_("button"),x.textContent=_e,this.h()},l:function(S){e=b(S,"FORM",{"aria-label":!0});var k=I(e);l=b(k,"H1",{"data-svelte-h":!0}),H(l)!=="svelte-8hggzl"&&(l.textContent=t),n=R(k),s=b(k,"LABEL",{for:!0,class:!0});var we=I(s);r=b(we,"SPAN",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-fqi07v"&&(r.textContent=i),we.forEach(w),p=R(k),m=b(k,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),c=R(k),d=b(k,"DIV",{class:!0});var Z=I(d);g=b(Z,"LABEL",{for:!0,class:!0});var ge=I(g);u=b(ge,"SPAN",{class:!0,"data-svelte-h":!0}),H(u)!=="svelte-1sc887w"&&(u.textContent=P),ge.forEach(w),K=R(Z),E=b(Z,"INPUT",{id:!0,type:!0,placeholder:!0,minlength:!0,maxlength:!0,autocomplete:!0,class:!0}),Z.forEach(w),y=R(k),U=b(k,"DIV",{class:!0});var $=I(U);O=b($,"LABEL",{for:!0,class:!0});var ye=I(O);V=b(ye,"SPAN",{class:!0,"data-svelte-h":!0}),H(V)!=="svelte-1e9fs6w"&&(V.textContent=he),ye.forEach(w),ne=R($),B=b($,"INPUT",{id:!0,type:!0,placeholder:!0,minlength:!0,maxlength:!0,autocomplete:!0,class:!0}),$.forEach(w),se=R(k),C&&C.l(k),Q=R(k),z=b(k,"DIV",{class:!0});var ke=I(z);T=b(ke,"BUTTON",{class:!0,type:!0});var oe=I(T);A&&A.l(oe),X=Ie(oe,`
								Save`),oe.forEach(w),ke.forEach(w),le=R(k),M=b(k,"DIV",{class:!0});var Ce=I(M);x=b(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1c7lnna"&&(x.textContent=_e),Ce.forEach(w),k.forEach(w),this.h()},h:function(){h(l,v,60,6,1938),a(r,"class","label-text"),h(r,v,62,7,2013),a(s,"for","email-input"),a(s,"class","label"),h(s,v,61,6,1966),m.value=N=o[0].email,a(m,"id","email-input"),a(m,"type","email"),a(m,"placeholder","email"),m.disabled=!0,a(m,"class","input input-bordered w-full"),h(m,v,64,6,2072),a(u,"class","label-text"),h(u,v,74,8,2336),a(g,"for","password-input"),a(g,"class","label"),h(g,v,73,7,2285),E.required=!0,a(E,"id","password-input"),a(E,"type","password"),a(E,"placeholder","password"),a(E,"minlength","12"),a(E,"maxlength","128"),a(E,"autocomplete","new-password"),a(E,"class","input input-bordered"),h(E,v,76,7,2400),a(d,"class","form-control"),h(d,v,72,6,2251),a(V,"class","label-text"),h(V,v,90,8,2784),a(O,"for","password-confirmation-input"),a(O,"class","label"),h(O,v,89,7,2720),B.required=!0,a(B,"id","password-confirmation-input"),a(B,"type","password"),a(B,"placeholder","confirm password"),a(B,"minlength","12"),a(B,"maxlength","128"),a(B,"autocomplete","new-password"),a(B,"class","input input-bordered"),h(B,v,92,7,2856),a(U,"class","form-control"),h(U,v,88,6,2686),a(T,"class","btn btn-primary w-36"),a(T,"type","submit"),h(T,v,109,7,3323),a(z,"class","form-control mt-6"),h(z,v,108,6,3284),a(x,"class","btn btn-xs btn-link p-0 no-underline label-text no-animation normal-case opacity-90 font-medium"),h(x,v,117,7,3546),a(M,"class","mt-7 w-full"),h(M,v,116,6,3513),a(e,"aria-label","form"),h(e,v,59,5,1848)},m:function(S,k){j(S,e,k),f(e,l),f(e,n),f(e,s),f(s,r),f(e,p),f(e,m),f(e,c),f(e,d),f(d,g),f(g,u),f(d,K),f(d,E),ee(E,o[1]),f(e,y),f(e,U),f(U,O),f(O,V),f(U,ne),f(U,B),ee(B,o[2]),f(e,se),C&&C.m(e,null),f(e,Q),f(e,z),f(z,T),A&&A.m(T,null),f(T,X),f(e,le),f(e,M),f(M,x),Y=!0,ae||(be=[J(E,"input",o[8]),J(B,"input",o[9]),J(x,"click",o[10],!1,!1,!1,!1),J(e,"submit",qe(o[11]),!1,!0,!1,!1)],ae=!0)},p:function(S,k){(!Y||k&1&&N!==(N=S[0].email)&&m.value!==N)&&ze(m,"value",N),k&2&&E.value!==S[1]&&ee(E,S[1]),k&4&&B.value!==S[2]&&ee(B,S[2]),S[5].length>0?C?(C.p(S,k),k&32&&L(C,1)):(C=ue(S),C.c(),L(C,1),C.m(e,Q)):C&&(me(),W(C,1,1,()=>{C=null}),pe()),S[3]?A||(A=ce(S),A.c(),A.m(T,X)):A&&(A.d(1),A=null)},i:function(S){Y||(L(C),Y=!0)},o:function(S){W(C),Y=!1},d:function(S){S&&w(e),C&&C.d(),A&&A.d(),ae=!1,xe(be)}};return q("SvelteRegisterBlock",{block:ve,id:Re.name,type:"else",source:"(51:4) {:else}",ctx:o}),ve}function Te(o){let e,l="New password saved",t,n,s="You can now sign in with email and password",r,i,p,m,N,c=o[3]&&fe(o);const d={c:function(){e=_("h1"),e.textContent=l,t=D(),n=_("p"),n.textContent=s,r=D(),i=_("button"),c&&c.c(),p=Ae(`
						Go to app`),this.h()},l:function(u){e=b(u,"H1",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-vo1szl"&&(e.textContent=l),t=R(u),n=b(u,"P",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-ok1xll"&&(n.textContent=s),r=R(u),i=b(u,"BUTTON",{class:!0,type:!0});var P=I(i);c&&c.l(P),p=Ie(P,`
						Go to app`),P.forEach(w),this.h()},h:function(){a(e,"class","mb-2"),h(e,v,50,5,1518),a(n,"class","mt-0 mb-5"),h(n,v,51,5,1564),a(i,"class","btn btn-primary w-36"),a(i,"type","submit"),h(i,v,52,5,1638)},m:function(u,P){j(u,e,P),j(u,t,P),j(u,n,P),j(u,r,P),j(u,i,P),c&&c.m(i,null),f(i,p),m||(N=J(i,"click",o[7],!1,!1,!1,!1),m=!0)},p:function(u,P){u[3]?c||(c=fe(u),c.c(),c.m(i,p)):c&&(c.d(1),c=null)},i:Se,o:Se,d:function(u){u&&(w(e),w(t),w(n),w(r),w(i)),c&&c.d(),m=!1,N()}};return q("SvelteRegisterBlock",{block:d,id:Te.name,type:"if",source:"(42:4) {#if passwordUpdated}",ctx:o}),d}function ue(o){let e,l;e=new De({props:{message:o[5]},$$inline:!0});const t={c:function(){Me(e.$$.fragment)},l:function(s){Fe(e.$$.fragment,s)},m:function(s,r){Ge(e,s,r),l=!0},p:function(s,r){const i={};r&32&&(i.message=s[5]),e.$set(i)},i:function(s){l||(L(e.$$.fragment,s),l=!0)},o:function(s){W(e.$$.fragment,s),l=!1},d:function(s){He(e,s)}};return q("SvelteRegisterBlock",{block:t,id:ue.name,type:"if",source:"(97:6) {#if $updatePasswordError.length > 0}",ctx:o}),t}function ce(o){let e;const l={c:function(){e=_("span"),this.h()},l:function(n){e=b(n,"SPAN",{class:!0}),I(e).forEach(w),this.h()},h:function(){a(e,"class","loading loading-spinner"),h(e,v,111,9,3409)},m:function(n,s){j(n,e,s)},d:function(n){n&&w(e)}};return q("SvelteRegisterBlock",{block:l,id:ce.name,type:"if",source:"(103:8) {#if inProgress}",ctx:o}),l}function fe(o){let e;const l={c:function(){e=_("span"),this.h()},l:function(n){e=b(n,"SPAN",{class:!0}),I(e).forEach(w),this.h()},h:function(){a(e,"class","loading loading-spinner"),h(e,v,54,7,1747)},m:function(n,s){j(n,e,s)},d:function(n){n&&w(e)}};return q("SvelteRegisterBlock",{block:l,id:fe.name,type:"if",source:"(46:6) {#if inProgress}",ctx:o}),l}function de(o){let e,l,t=o[0]&&o[0]!==void 0&&ie(o);const n={c:function(){t&&t.c(),e=Ne()},l:function(r){t&&t.l(r),e=Ne()},m:function(r,i){t&&t.m(r,i),j(r,e,i),l=!0},p:function(r,[i]){r[0]&&r[0]!==void 0?t?(t.p(r,i),i&1&&L(t,1)):(t=ie(r),t.c(),L(t,1),t.m(e.parentNode,e)):t&&(me(),W(t,1,1,()=>{t=null}),pe())},i:function(r){l||(L(t),l=!0)},o:function(r){W(t),l=!1},d:function(r){r&&w(e),t&&t.d(r)}};return q("SvelteRegisterBlock",{block:n,id:de.name,type:"component",source:"",ctx:o}),n}function We(o,e,l){let t,n;Pe(re,"user"),Ee(o,re,y=>l(0,t=y)),Pe(G,"updatePasswordError"),Ee(o,G,y=>l(5,n=y));let{$$slots:s={},$$scope:r}=e;Ve("Page",s,[]);let i,p,m=!1,N=!1;async function c(){let y=Be.currentUser;try{i===p&&i.length>=12?y!==null&&(l(3,m=!0),await Ue(y,i),l(3,m=!1),l(4,N=!0),G.set("")):i!==p?G.set("Passwords don't match"):i.length<12&&G.set("Password too short, 12 characters minimum.")}catch(U){typeof U=="object"&&U&&"message"in U&&typeof U.message=="string"&&G.set(U.message.replace("Firebase: ",""))}}const d=[];Object.keys(e).forEach(y=>{!~d.indexOf(y)&&y.slice(0,2)!=="$$"&&y!=="slot"&&console.warn(`<Page> was created with unknown prop '${y}'`)});const g=()=>te("/");function u(){i=this.value,l(1,i)}function P(){p=this.value,l(2,p)}const K=()=>{te("/")},E=async()=>await c();return o.$capture_state=()=>({auth:Be,updatePassword:Ue,updatePasswordError:G,WarningMessage:De,user:re,goto:te,password:i,passwordConfirm:p,inProgress:m,passwordUpdated:N,setPassword:c,$user:t,$updatePasswordError:n}),o.$inject_state=y=>{"password"in y&&l(1,i=y.password),"passwordConfirm"in y&&l(2,p=y.passwordConfirm),"inProgress"in y&&l(3,m=y.inProgress),"passwordUpdated"in y&&l(4,N=y.passwordUpdated)},e&&"$$inject"in e&&o.$inject_state(e.$$inject),o.$$.update=()=>{o.$$.dirty&1&&t===null&&te("/auth")},[t,i,p,m,N,n,c,g,u,P,K,E]}class $e extends Le{constructor(e){super(e),Oe(this,e,We,de,je,{}),q("SvelteRegisterComponent",{component:this,tagName:"Page",options:e,id:de.name})}}export{$e as component};
